<ion-header>
  <ion-toolbar>
    <ion-title>Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Tenant Configuration</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      @if (tenantService.loading()) {
        <div class="loadingContainer">
          <ion-spinner></ion-spinner>
          <p>Loading tenants...</p>
        </div>
      } @else if (tenantService.error()) {
        <ion-note color="danger">
          Error: {{ tenantService.error() }}
        </ion-note>
      } @else {
        <ion-list>
          @if (tenantService.tenants().length === 0) {
            <ion-item>
              <ion-label>
                <p>No tenants configured. Create one to get started.</p>
              </ion-label>
            </ion-item>
          } @else {
            <ion-radio-group [value]="tenantService.selectedTenantId()" (ionChange)="onTenantChange($event.detail.value)">
              @for (tenant of tenantService.tenants(); track tenant.id) {
                <ion-item>
                  <ion-radio [value]="tenant.id">
                    <ion-label>
                      <h3>{{ tenant.dbName }}</h3>
                      <p>ID: {{ tenant.id }}</p>
                    </ion-label>
                  </ion-radio>
                </ion-item>
              }
            </ion-radio-group>
          }

          <ion-item>
            <ion-button expand="block" (click)="createTenant()">
              Create New Tenant
            </ion-button>
          </ion-item>
        </ion-list>
      }
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Application Info</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>
            <h2>Version</h2>
            <p>1.0.0</p>
          </ion-label>
        </ion-item>
        @if (tenantService.selectedTenant()) {
          <ion-item>
            <ion-label>
              <h2>Current Database</h2>
              <p>{{ tenantService.selectedTenant()?.dbName }}</p>
            </ion-label>
          </ion-item>
        }
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>
